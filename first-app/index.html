<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Sample mini-site for cluster tutorials"><meta name=author content="Lisa Gunn - Information Developer"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="One matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../assets/images/favicon.ico><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.0"><title>Deploy the first app - Tutorials</title><link rel=stylesheet href=../assets/stylesheets/application.0284f74d.css><link rel=stylesheet href=../assets/stylesheets/application-palette.01803549.css><meta name=theme-color content=#3f51b5><script src=../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../assets/fonts/material-icons.css><link rel=stylesheet href=../assets/extra.css></head> <body dir=ltr data-md-color-primary=indigo data-md-color-accent=green> <svg class=md-svg> <defs> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#deploy-the-first-application tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=.. title=Tutorials class="md-header-nav__button md-logo"> <img src=../global-img/gunnLogo.gif width=24 height=24> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Tutorials </span> <span class=md-header-nav__topic> Deploy the first app </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder="Search the content" autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. title="Welcome to DC/OS Tutorials" class=md-tabs__link> Welcome to DC/OS Tutorials </a> </li> <li class=md-tabs__item> <a href=../intro/ title="Get started" class=md-tabs__link> Get started </a> </li> <li class=md-tabs__item> <a href=./ title="Deploy apps" class="md-tabs__link md-tabs__link--active"> Deploy apps </a> </li> <li class=md-tabs__item> <a href=../service-discovery/ title="Publish apps" class=md-tabs__link> Publish apps </a> </li> <li class=md-tabs__item> <a href=../resources/ title="Manage resources" class=md-tabs__link> Manage resources </a> </li> </ul> </div> </nav> <main class=md-main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=.. title=Tutorials class="md-nav__button md-logo"> <img src=../global-img/gunnLogo.gif width=48 height=48> </a> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title="Welcome to DC/OS Tutorials" class=md-nav__link> Welcome to DC/OS Tutorials </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Get started </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Get started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../intro/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../start-here/start-here/ title="Create a cluster" class=md-nav__link> Create a cluster </a> </li> <li class=md-nav__item> <a href=../cli/ title="Install the CLI" class=md-nav__link> Install the CLI </a> </li> <li class=md-nav__item> <a href=../first-package/ title="Install the first package" class=md-nav__link> Install the first package </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> Deploy apps </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> Deploy apps </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Deploy the first app </label> <a href=./ title="Deploy the first app" class="md-nav__link md-nav__link--active"> Deploy the first app </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Topics on this page</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#before-you-begin title="Before you begin" class=md-nav__link> Before you begin </a> </li> <li class=md-nav__item> <a href=#learning-objectives title="Learning objectives" class=md-nav__link> Learning objectives </a> </li> <li class=md-nav__item> <a href=#review-the-sample-app-definition title="Review the sample app definition" class=md-nav__link> Review the sample app definition </a> </li> <li class=md-nav__item> <a href=#deploy-the-sample-app title="Deploy the sample app" class=md-nav__link> Deploy the sample app </a> </li> <li class=md-nav__item> <a href=#next-steps title="Next steps" class=md-nav__link> Next steps </a> </li> <li class=md-nav__item> <a href=#related-topics title="Related topics" class=md-nav__link> Related topics </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../create-service/ title="Create and run custom apps" class=md-nav__link> Create and run custom apps </a> </li> <li class=md-nav__item> <a href=../schedule-jobs/ title="Create and schedule jobs" class=md-nav__link> Create and schedule jobs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Publish apps </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Publish apps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../service-discovery/ title="Discover deployed services" class=md-nav__link> Discover deployed services </a> </li> <li class=md-nav__item> <a href=../native-app/ title="Deploy and expose native container apps" class=md-nav__link> Deploy and expose native container apps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Manage resources </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Manage resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../resources/ title="Allocate and scale resources" class=md-nav__link> Allocate and scale resources </a> </li> <li class=md-nav__item> <a href=../loadbalancing/ title="Load balancing workload" class=md-nav__link> Load balancing workload </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Topics on this page</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#before-you-begin title="Before you begin" class=md-nav__link> Before you begin </a> </li> <li class=md-nav__item> <a href=#learning-objectives title="Learning objectives" class=md-nav__link> Learning objectives </a> </li> <li class=md-nav__item> <a href=#review-the-sample-app-definition title="Review the sample app definition" class=md-nav__link> Review the sample app definition </a> </li> <li class=md-nav__item> <a href=#deploy-the-sample-app title="Deploy the sample app" class=md-nav__link> Deploy the sample app </a> </li> <li class=md-nav__item> <a href=#next-steps title="Next steps" class=md-nav__link> Next steps </a> </li> <li class=md-nav__item> <a href=#related-topics title="Related topics" class=md-nav__link> Related topics </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=deploy-the-first-application>Deploy the first application<a class=headerlink href=#deploy-the-first-application title="Permanent link">&para;</a></h1> <h4 class=summary>Describes how to define and deploy a sample service instance on the cluster</h4> <hr> <p>Now that you are familiar with how to search for and install services from the DC/OS package repository, you are ready to start deploying applications that use the service.</p> <p>This tutorial demonstrates how you can deploy a simple application that connects to the <a href=https://redislabs.com/ >Redis</a> service you deployed in the previous tutorial.</p> <h2 id=before-you-begin>Before you begin<a class=headerlink href=#before-you-begin title="Permanent link">&para;</a></h2> <p>Before starting this tutorial, you should verify the following:</p> <ul> <li> <p>You have access to a running <a href=../start-here/ >DC/OS cluster</a> with at least at least one master node and three agent nodes.</p> </li> <li> <p>You have access to a computer where the <a href=../cli/ >DC/OS CLI</a> is installed.</p> </li> <li> <p>You have the <a href=/1.13/tutorials/dcos-101/redis-package/ >Redis</a> package installed and the Redis service running in your cluster.</p> </li> </ul> <p>The sample application in this tutorial has some dependencies on external libraries. To ensure you can complete the tutorial, you should download the Docker image for the sample app. The Docker image provided includes all of the necessary files so that you don't need to download any additional libraries or resolve external dependencies.</p> <h2 id=learning-objectives>Learning objectives<a class=headerlink href=#learning-objectives title="Permanent link">&para;</a></h2> <p>By completing this tutorial, you will learn:</p> <ul> <li> <p>How to deploy a simple app definition that connects to the Redis service.</p> </li> <li> <p>How to check the status of your sample app.</p> </li> </ul> <h2 id=review-the-sample-app-definition>Review the sample app definition<a class=headerlink href=#review-the-sample-app-definition title="Permanent link">&para;</a></h2> <p>For this tutorial, you are going to deploy a very simple <a href=https://raw.githubusercontent.com/joerg84/dcos-101/master/app1/app1.py>sample app</a> that checks whether a connection to the Redis service is available, then prints the total number of keys stored there.</p> <p>The sample app is a Python script has a dependency on the <a href=https://pypi.python.org/pypi/redis>redis-py</a> Python library. Because of this dependency and that you cannot assume the required library will be present on all agent nodes, you should run the sample app using the <code>dcos-101</code> Docker container that provides all of the dependencies.</p> <p>You might also want to review:</p> <ul> <li> <p>The <a href=https://github.com/joerg84/dcos-101/blob/master/app1/DOCKERFILE>DOCKERFILE</a>, used to create the <code>dcos-101</code> image.</p> </li> <li> <p>The <a href=https://raw.githubusercontent.com/joerg84/dcos-101/master/app1/app1.json>app definition</a> used to deploy and manage the application. This app definition downloads the sample app Python script and runs it inside the <code>dcos-101</code> container. </p> </li> </ul> <h2 id=deploy-the-sample-app>Deploy the sample app<a class=headerlink href=#deploy-the-sample-app title="Permanent link">&para;</a></h2> <ol> <li> <p>Add the sample app to Marathon using the app definition by running the following command:</p> <p><code>dcos marathon app add https://raw.githubusercontent.com/joerg84/dcos-101/master/app1/app1.json</code></p> </li> <li> <p>Check that the sample app is running.</p> <p>From the DC/OS web-based console:</p> <ul> <li> <p>Click <strong>Services</strong>. <img alt="Viewing the sample app in the list of services" src=../img/tutorial-dcos101-app1-service.png></p> </li> <li> <p>Click <strong>dcos-101</strong>. <img alt="Viewing app1 information" src=../img/tutorial-app1-view.png></p> </li> <li> <p>Click <strong>app1</strong>. <img alt="Viewing task information" src=../img/tutorial-app1-tasks.png></p> </li> </ul> <p>From the DC/OS CLI:</p> <ul> <li> <p>View the status for all DC/OS tasks by running: <code>dcos task</code></p> </li> <li> <p>View information for all Marathon apps by running: <code>dcos marathon app list</code></p> </li> <li>View log information for the app by running: <code>dcos task log app1</code></li> </ul> <p>The output from the <code>dcos task log app1</code> command indicates the node and port where the <strong>app1</strong> sample application is running, the status of the connection to Redis, and the number of keys you have stored in the Redis service.</p> <p>For example:</p> <p><code>Running on node '10.4.6.52' and port '6512 Redis Connected. Total number of keys: 2</code></p> <p>Keep in mind that the node and port information might vary between different runs and over the lifetime of the deployed app, depending on other events in the cluster. How DC/OS locates service instances running on different nodes and using different ports is covered in a later section.</p> </li> </ol> <h2 id=next-steps>Next steps<a class=headerlink href=#next-steps title="Permanent link">&para;</a></h2> <p>In this tutorial, you deployed your first app inside a Docker container using Marathon and verified that the app is running and that it can connect successfully to the previously-deployed Redis service.</p> <p>Taken together, these two tutorials represent a common scenario in which you deploy a backend service such as Redis or MySQL, then deploy apps that connect to that service to perform specific tasks such as reporting the number of keys stored in the Redis service or presenting the results of a query in a dashboard.</p> <p>The next tutorials explore additional deployment tasks that you can perform and expose additional components of the DC/OS architecture:</p> <ul> <li> <p><a href=../create-service/ >Create and deploy your own apps</a></p> </li> <li> <p><a href=../service-discovery/ >Discover deployed services</a></p> </li> <li> <p><a href=../native-app/ >Deploy native containerized applications</a></p> </li> <li> <p><a href=../schedule-jobs/ >Schedule tasks to run as jobs</a></p> </li> </ul> <h2 id=related-topics>Related topics<a class=headerlink href=#related-topics title="Permanent link">&para;</a></h2> <p>You have now deployed the Redis service and a predefined sample app using <a href=https://mesosphere.github.io/marathon/ >Marathon</a>. </p> <p>Marathon is a core component of the DC/OS platform. Marathon enables the DC/OS cluster to better support long-running services and is used to perform several key operations, including scaling up or down the number of app instances, modifying resource requires or configuration details, and deploying or removing applications from the cluster.</p> <p>For more information about working with Marathon, see the following topics:</p> <ul> <li> <p><a href=https://docs.mesosphere.com/1.13/deploying-services/ >Deploying services and pods</a> for informaiton about using Marathon to manage your processes, services, and multiple service pods.</p> </li> <li> <p><a href=https://docs.mesosphere.com/1.13/cli/command-reference/dcos-marathon/ >DC/OS CLI Marathon plugin</a> for information about using DC/OS CLI commands for Marathon. You can also get more information about <code>dcos marathon</code> commands by typing <code>dcos marathon app --help</code> in a terminal shell.</p> </li> <li> <p><a href=http://mesosphere.github.io/marathon/api-console/index.html>REST API</a> for information about using HTTP endpoints. </p> </li> </ul> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../first-package/ title="Install the first package" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Previous </span> Install the first package </span> </div> </a> <a href=../create-service/ title="Create and run custom apps" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Next </span> Create and run custom apps </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2019. All rights reserved. </div> </div> <div class=md-footer-social> <link rel=stylesheet href=../assets/fonts/font-awesome.css> <a href=https://github.com/lsgunnlsgunn class="md-footer-social__link fa fa-github"></a> <a href=https://twitter.com/gunncomm class="md-footer-social__link fa fa-twitter"></a> <a href=https://linkedin.com/in/lisagunn class="md-footer-social__link fa fa-linkedin"></a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/application.245445c6.js></script> <script>app.initialize({version:"1.0.4",url:{base:".."}})</script> <script src=../javascripts/extra.js></script> </body> </html>