<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Sample mini-site for cluster tutorials"><meta name=author content="Lisa Gunn - Information Developer"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="One matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../assets/images/favicon.ico><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.0"><title>Create and schedule jobs - Tutorials</title><link rel=stylesheet href=../assets/stylesheets/application.0284f74d.css><link rel=stylesheet href=../assets/stylesheets/application-palette.01803549.css><meta name=theme-color content=#3f51b5><script src=../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../assets/fonts/material-icons.css><link rel=stylesheet href=../assets/extra.css></head> <body dir=ltr data-md-color-primary=indigo data-md-color-accent=green> <svg class=md-svg> <defs> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#create-and-schedule-jobs tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=.. title=Tutorials class="md-header-nav__button md-logo"> <img src=../global-img/gunnLogo.gif width=24 height=24> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Tutorials </span> <span class=md-header-nav__topic> Create and schedule jobs </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder="Search the content" autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. title="Welcome to DC/OS Tutorials" class=md-tabs__link> Welcome to DC/OS Tutorials </a> </li> <li class=md-tabs__item> <a href=../intro/ title="Get started" class=md-tabs__link> Get started </a> </li> <li class=md-tabs__item> <a href=../first-app/ title="Deploy apps" class="md-tabs__link md-tabs__link--active"> Deploy apps </a> </li> <li class=md-tabs__item> <a href=../service-discovery/ title="Publish apps" class=md-tabs__link> Publish apps </a> </li> <li class=md-tabs__item> <a href=../resources/ title="Manage resources" class=md-tabs__link> Manage resources </a> </li> </ul> </div> </nav> <main class=md-main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=.. title=Tutorials class="md-nav__button md-logo"> <img src=../global-img/gunnLogo.gif width=48 height=48> </a> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title="Welcome to DC/OS Tutorials" class=md-nav__link> Welcome to DC/OS Tutorials </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Get started </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Get started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../intro/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../start-here/start-here/ title="Create a cluster" class=md-nav__link> Create a cluster </a> </li> <li class=md-nav__item> <a href=../cli/ title="Install the CLI" class=md-nav__link> Install the CLI </a> </li> <li class=md-nav__item> <a href=../first-package/ title="Install the first package" class=md-nav__link> Install the first package </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> Deploy apps </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> Deploy apps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../first-app/ title="Deploy the first app" class=md-nav__link> Deploy the first app </a> </li> <li class=md-nav__item> <a href=../create-service/ title="Create and run custom apps" class=md-nav__link> Create and run custom apps </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Create and schedule jobs </label> <a href=./ title="Create and schedule jobs" class="md-nav__link md-nav__link--active"> Create and schedule jobs </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Topics on this page</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#manage-jobs-with-the-dcos-web-based-interface title="Manage jobs with the DC/OS web-based interface" class=md-nav__link> Manage jobs with the DC/OS web-based interface </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#add-a-job title="Add a job" class=md-nav__link> Add a job </a> </li> <li class=md-nav__item> <a href=#add-a-job-to-a-job-group title="Add a job to a job group" class=md-nav__link> Add a job to a job group </a> </li> <li class=md-nav__item> <a href=#view-modify-or-remove-a-specific-job title="View, modify, or remove a specific job" class=md-nav__link> View, modify, or remove a specific job </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#managing-jobs-with-the-dcos-cli title="Managing jobs with the DC/OS CLI" class=md-nav__link> Managing jobs with the DC/OS CLI </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-a-json-file-for-a-new-job title="Create a JSON file for a new job" class=md-nav__link> Create a JSON file for a new job </a> </li> <li class=md-nav__item> <a href=#set-a-concurrency-policy-for-scheduled-jobs title="Set a concurrency policy for scheduled jobs" class=md-nav__link> Set a concurrency policy for scheduled jobs </a> </li> <li class=md-nav__item> <a href=#create-a-schedule-only-json-file title="Create a schedule-only JSON file" class=md-nav__link> Create a schedule-only JSON file </a> </li> <li class=md-nav__item> <a href=#start-a-job-from-the-command-line title="Start a job from the command line" class=md-nav__link> Start a job from the command line </a> </li> <li class=md-nav__item> <a href=#remove-a-job-from-the-command-line title="Remove a job from the command-line" class=md-nav__link> Remove a job from the command-line </a> </li> <li class=md-nav__item> <a href=#modify-a-job-from-the-command-line title="Modify a job from the command line" class=md-nav__link> Modify a job from the command line </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modify-a-jobs-schedule title="Modify a job's schedule" class=md-nav__link> Modify a job's schedule </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modify-a-job-with-a-schedule title="Modify a job with a schedule" class=md-nav__link> Modify a job with a schedule </a> </li> <li class=md-nav__item> <a href=#modify-a-job-with-a-separate-schedule-file title="Modify a job with a separate schedule file" class=md-nav__link> Modify a job with a separate schedule file </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#view-job-details title="View job details" class=md-nav__link> View job details </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#view-job-logs title="View job logs" class=md-nav__link> View job logs </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#preparing-to-use-api-cals title="Preparing to use API cals" class=md-nav__link> Preparing to use API cals </a> </li> <li class=md-nav__item> <a href=#add-a-job-using-an-api-call title="Add a job using an API call" class=md-nav__link> Add a job using an API call </a> </li> <li class=md-nav__item> <a href=#remove-a-job-using-an-api-call title="Remove a job using an API call" class=md-nav__link> Remove a job using an API call </a> </li> <li class=md-nav__item> <a href=#modify-or-view-a-job-using-an-api-call title="Modify or view a job using an API call" class=md-nav__link> Modify or view a job using an API call </a> </li> <li class=md-nav__item> <a href=#add-a-schedule-to-a-job title="Add a schedule to a job" class=md-nav__link> Add a schedule to a job </a> </li> <li class=md-nav__item> <a href=#start-a-job-using-an-api-call title="Start a job using an API call" class=md-nav__link> Start a job using an API call </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Publish apps </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Publish apps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../service-discovery/ title="Discover deployed services" class=md-nav__link> Discover deployed services </a> </li> <li class=md-nav__item> <a href=../native-app/ title="Deploy and expose native container apps" class=md-nav__link> Deploy and expose native container apps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Manage resources </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Manage resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../resources/ title="Allocate and scale resources" class=md-nav__link> Allocate and scale resources </a> </li> <li class=md-nav__item> <a href=../loadbalancing/ title="Load balancing workload" class=md-nav__link> Load balancing workload </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Topics on this page</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#manage-jobs-with-the-dcos-web-based-interface title="Manage jobs with the DC/OS web-based interface" class=md-nav__link> Manage jobs with the DC/OS web-based interface </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#add-a-job title="Add a job" class=md-nav__link> Add a job </a> </li> <li class=md-nav__item> <a href=#add-a-job-to-a-job-group title="Add a job to a job group" class=md-nav__link> Add a job to a job group </a> </li> <li class=md-nav__item> <a href=#view-modify-or-remove-a-specific-job title="View, modify, or remove a specific job" class=md-nav__link> View, modify, or remove a specific job </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#managing-jobs-with-the-dcos-cli title="Managing jobs with the DC/OS CLI" class=md-nav__link> Managing jobs with the DC/OS CLI </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-a-json-file-for-a-new-job title="Create a JSON file for a new job" class=md-nav__link> Create a JSON file for a new job </a> </li> <li class=md-nav__item> <a href=#set-a-concurrency-policy-for-scheduled-jobs title="Set a concurrency policy for scheduled jobs" class=md-nav__link> Set a concurrency policy for scheduled jobs </a> </li> <li class=md-nav__item> <a href=#create-a-schedule-only-json-file title="Create a schedule-only JSON file" class=md-nav__link> Create a schedule-only JSON file </a> </li> <li class=md-nav__item> <a href=#start-a-job-from-the-command-line title="Start a job from the command line" class=md-nav__link> Start a job from the command line </a> </li> <li class=md-nav__item> <a href=#remove-a-job-from-the-command-line title="Remove a job from the command-line" class=md-nav__link> Remove a job from the command-line </a> </li> <li class=md-nav__item> <a href=#modify-a-job-from-the-command-line title="Modify a job from the command line" class=md-nav__link> Modify a job from the command line </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modify-a-jobs-schedule title="Modify a job's schedule" class=md-nav__link> Modify a job's schedule </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modify-a-job-with-a-schedule title="Modify a job with a schedule" class=md-nav__link> Modify a job with a schedule </a> </li> <li class=md-nav__item> <a href=#modify-a-job-with-a-separate-schedule-file title="Modify a job with a separate schedule file" class=md-nav__link> Modify a job with a separate schedule file </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#view-job-details title="View job details" class=md-nav__link> View job details </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#view-job-logs title="View job logs" class=md-nav__link> View job logs </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#preparing-to-use-api-cals title="Preparing to use API cals" class=md-nav__link> Preparing to use API cals </a> </li> <li class=md-nav__item> <a href=#add-a-job-using-an-api-call title="Add a job using an API call" class=md-nav__link> Add a job using an API call </a> </li> <li class=md-nav__item> <a href=#remove-a-job-using-an-api-call title="Remove a job using an API call" class=md-nav__link> Remove a job using an API call </a> </li> <li class=md-nav__item> <a href=#modify-or-view-a-job-using-an-api-call title="Modify or view a job using an API call" class=md-nav__link> Modify or view a job using an API call </a> </li> <li class=md-nav__item> <a href=#add-a-schedule-to-a-job title="Add a schedule to a job" class=md-nav__link> Add a schedule to a job </a> </li> <li class=md-nav__item> <a href=#start-a-job-using-an-api-call title="Start a job using an API call" class=md-nav__link> Start a job using an API call </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=create-and-schedule-jobs>Create and schedule jobs<a class=headerlink href=#create-and-schedule-jobs title="Permanent link">&para;</a></h1> <h4 class=summary>Provides instructions for creating, scheduling, and managing jobs to run on a DC/OS cluster</h4> <hr> <p>You can create and administer jobs for the DC/OS cluster in any of the following ways: - interactively with the DC/OS web-based administrative console GUI. - interactively or programmatically with DC/OS command-line interface (CLI) programs. - directly through calls to the DC/OS application programming interface (API) for job-related operations.</p> <p>The DC/OS application programming interface (API) for job-related operations provides the underlying functionality that you can access through the DC/OS web-based administrative console and command-line interface (CLI). In most cases, therefore, you would only use the API directly if you are integrating the functionality with a custom program or automation script.</p> <h2 id=manage-jobs-with-the-dcos-web-based-interface>Manage jobs with the DC/OS web-based interface<a class=headerlink href=#manage-jobs-with-the-dcos-web-based-interface title="Permanent link">&para;</a></h2> <p>You can manage the most common job-related activity interactively through the DC/OS web-based interface. For example, you can add, modify, run, and remove jobs directly from the <strong>Jobs</strong> tab in the web-based console. However, the DC/OS web-based interface only provides access to a subset of the job-related functionality provided through the <code>dcos job</code> CLI and Jobs API. For more advanced job configurations and activity, use the <a href=/1.13/cli/command-reference/dcos-job/ ><code>dcos job</code></a> commands or the <a href=/1.13/deploying-jobs/quickstart/#jobs-api>Jobs API</a>.</p> <h3 id=add-a-job>Add a job<a class=headerlink href=#add-a-job title="Permanent link">&para;</a></h3> <ol> <li> <p>Navigate to the URL for the DC/OS web-based console in a web browser.</p> </li> <li> <p>Click <strong>Jobs</strong>, then click <strong>Create a Job</strong> to display the New Job settings. </p> <p><img alt="Create JOB UI" src=../img/job-new-general-fields.png></p> <p>You can configure the job using the fields displayed or click <strong>JSON Editor</strong> to edit the JSON directly. If you click <strong>Jobs</strong> and see a list of previously-created jobs, click the plus (+) sign displayed above and to the right of the job list to create a new job.</p> </li> <li> <p>Click <strong>General</strong> to edit the most basic job settings, such as the job identifier, CPU, memory, and disk requirements.</p> <ul> <li><strong>Job ID</strong> - Defines a unique identifier for the new job. The Job ID is a required field. You also use this setting to manage job operations.</li> <li><strong>Description</strong> - Provides an optional description of the new job.</li> <li><strong>CPUs</strong> - Specifies the number of CPU cores your job requires. This field is required for all jobs.</li> <li><strong>Mem</strong> - Specifies the amount of memory, in MB, your job requires. This field is required for all jobs.</li> <li><strong>Disk</strong> - Specifies the amount of disk space, in MB, your job requires. This field is required for all jobs.</li> <li><strong>GPUs</strong> - Specifies the number of GPU (Graphics Processing Unit) cores to allocate for processing your job. This field is only applicable for jobs that run on nodes configured to use GPU (Graphics Processing Unit) cores.</li> </ul> </li> <li> <p>Select the appropriate Job Type to run one or more specific commands or a Docker container image.</p> <ul> <li> <p>Select <strong>Command Only</strong> to specify one or more commands you want the new job to execute. </p> <p>If you select <strong>Command Only</strong>, you must specify the command or command arguments to execute. When the command you specify is executed, it is automatically wrapped by the command <code>/bin/sh -c job.cmd</code>. You must include either <code>cmd</code> or <code>args</code> in the command to be executed. It is invalid to supply both <code>cmd</code> and <code>args</code> in the same job.</p> <p>If you select the <strong>Command Only</strong> option, none of the <strong>Container Runtime</strong> settings are applicable for the job. You can continue creating the job by defining <strong>Schedule</strong> settings, adding advanced <strong>Run Configuration</strong> options, or clicking <strong>Submit</strong>.</p> </li> <li> <p>Select <strong>Container Image</strong> to specify a container image for the new job. If you select this option, type the name of the container image you want to run. For example, you can type a container image name such as <code>ubuntu:14.04</code>. You can then use the <strong>Command</strong> field to specify the command and any additional runtime parameters available in the container for running the new job. </p> <p>If you select the <strong>Container Image</strong> option, you can continue creating the job by: - Configuring <strong>Container Runtime</strong> settings for the job. - Defining a job <strong>Schedule</strong>, if applicable. - Adding advanced <strong>Run Configuration</strong> options, if applicable. - Clicking <strong>Submit</strong>.</p> </li> </ul> </li> <li> <p>Click <strong>Container Runtime</strong> to specify whether the container for the new job runs using the Universal Container Runtime or the Docker engine. </p> <ul> <li> <p>If you select <strong>Universal Container Runtime</strong>, you can select Force Pull Image On Launch to automatically pull the latest image before launching each instance.</p> </li> <li> <p>If you select <strong>Docker Engine</strong>, you can select the following additional options:</p> <ul> <li>Select <strong>Force Pull Image On Launch</strong> to automatically pull the latest image before launching each instance.</li> <li>Select <strong>Grant Runtime Privileges</strong> to run the specified Docker image in privileged mode.</li> <li>Click <strong>Add Parameter</strong> to specify additional Docker runtime parameter names and values for the new job, if applicable. You can add multiple parameter names and corresponding values by clicking <strong>Add Parameter</strong> for each parameter name and value you want to include.</li> <li>Click <strong>Add Arg</strong> to specify additional command-line arguments for the new job, if applicable. You can add multiple arguments by clicking <strong>Add Arg</strong> for each argument you want to include.</li> </ul> </li> </ul> </li> <li> <p>Click <strong>Schedule</strong>, then click <strong>Enable Schedule</strong> to specify a schedule for when the job runs.</p> <p>Select <strong>Enable Schedule</strong> if you want to run the job using the schedule you define with the following settings:</p> <ul> <li> <p>Type a <strong>Schedule ID</strong> to define a unique identifier for the job schedule. The schedule identifier must be a string with at least 2 characters and it can only contain digits (<code>0-9</code>), dashes (<code>-</code>), and lowercase letters (<code>a-z</code>). The schedule identifier must not begin or end with a dash.</p> </li> <li> <p>Select <strong>CRON Schedule</strong> to specify the schedule in <code>cron</code> format. Use <a href=http://crontab.guru>this crontab generator</a> for help. You can also set a <strong>Time Zone</strong> to apply to the cron schedule. For example, you might have nodes in different time zones and want to run the job using a standardized UTC time or a specific local time zone such as America/New_York.</p> </li> <li> <p>Select <strong>Starting Deadline</strong> to set the time, in seconds, to start the job if it misses its scheduled time for any reason. Missed job executions are counted as failed jobs.</p> </li> <li> <p>Select <strong>Concurrency Policy</strong> if you want to allow new job instances to run if there's already a job instance running.</p> </li> </ul> <p>After you define the schedule, you can activate or deactivate it by selecting or deselecting the <strong>Enable Schedule</strong> option. You can also modify or remove the schedule when needed after you have submitted the new job definition.</p> </li> <li> <p>Click <strong>Run Configuration</strong> to specify advanced settings for the new job.</p> <ul> <li> <p>Set <strong>Max Launch Delay</strong> to specify the maximum number of seconds to wait for a job to start running after it is launched by a scheduled job run or manually by a user. If the job does not start running within the maximum number of seconds allowed, the job is aborted.</p> </li> <li> <p>Set <strong>Kill Grace Period</strong> to configure the number of seconds between escalating from <code>SIGTERM</code> to <code>SIGKILL</code> when signalling tasks to terminate. During this grace period, tasks should perform an orderly shut down immediately upon receiving SIGTERM.</p> </li> <li> <p>Set <strong>User name</strong> to identify the user account that runs the tasks on the agent.</p> </li> <li> <p>Select <strong>Add Artifact</strong> to provide one or more artifact URIs you want passed to fetcher module and resolved at runtime and the action--Execute, Extract, or Cache--you want to perform for each URI.</p> <p><img alt="Adding an artifact URI and action for a job" src=../img/job-artifacts-uri.png></p> </li> <li> <p>Select a <strong>Restart Policy</strong> to determine the steps to take if a job fails. </p> <ul> <li> <p>You can choose <strong>Never</strong> if you never want to attempt to restart a failed job. </p> </li> <li> <p>If you choose <strong>On Failure</strong>, you can set a time limit for attempting to restart the job using the <strong>Keep Trying Time</strong> field. For example, set the <strong>Keep Trying Time</strong> to 30 if you want to try restarting the job after waiting for 30 seconds. If no value is set for Keep Trying Time, DC/OS will continue attempting to restart the failed job indefinitely.</p> </li> </ul> </li> <li> <p>Click <strong>Add Label</strong> to specify a <strong>Key</strong> and <strong>Value</strong> that you want to attach as metadata to the new job. You can then use the job label to filter or expose information for labeled jobs. You can add multiple label key name/value pairs by clicking <strong>Add Label</strong> for each name/value pair you want to include. For more information about using labels, see <a href=../tutorials/task-labels/ >Labeling tasks and jobs</a>.</p> </li> </ul> </li> <li> <p>Click <strong>Submit</strong> to create the job.</p> </li> <li> <p>Verify that you have added the new job by clicking <strong>Jobs</strong>.</p> <p><img alt="Jobs List" src=../img/job-list-scheduled.png></p> </li> </ol> <h3 id=add-a-job-to-a-job-group>Add a job to a job group<a class=headerlink href=#add-a-job-to-a-job-group title="Permanent link">&para;</a></h3> <p>You can add a job to a an existing job group or create a new job group when you create the job. Use dots in your job ID to nest the job in a group. For example, if you add a job using the job ID <code>marketing.myjob</code>, the new <code>myjob</code> is created in the <code>marketing</code> job group. In DC/OS Enterprise, you can use job groups to implement fine-grained user access. For more information about controlling access to jobs through job groups, see <a href=/1.13/deploying-jobs/job-groups/ >Granting access to jobs</a>.</p> <h3 id=view-modify-or-remove-a-specific-job>View, modify, or remove a specific job<a class=headerlink href=#view-modify-or-remove-a-specific-job title="Permanent link">&para;</a></h3> <p>You can view and modify job-related information, including details about the run history and configuration settings interactively through the DC/OS web-based interface. From the <strong>Jobs</strong> tab, click the name of your job. You can then use the menu on the upper right to edit, run, disable, or delete a selected job. </p> <p><img alt="Viewing and modifying job details" src=../img/job-menu-options.png></p> <p>While the job is running, you can click the job instance to drill down to <strong>Details</strong>, <strong>Files</strong>, and <strong>Logs</strong> data.</p> <h2 id=managing-jobs-with-the-dcos-cli>Managing jobs with the DC/OS CLI<a class=headerlink href=#managing-jobs-with-the-dcos-cli title="Permanent link">&para;</a></h2> <p>You can create and manage jobs from the DC/OS CLI using <code>dcos job</code> commands. To see a full list of available commands with usage information, run <code>dcos job --help</code>.</p> <p><a name=cli-add-job></a></p> <h3 id=create-a-json-file-for-a-new-job>Create a JSON file for a new job<a class=headerlink href=#create-a-json-file-for-a-new-job title="Permanent link">&para;</a></h3> <ol> <li> <p>Open a new file in a text editor to create a job file in JSON format. </p> </li> <li> <p>In the new file, specify the basic parameters required to define the job, including the following:</p> <ul> <li>the job <code>id</code> you use to manage the job</li> <li>the specific command to run</li> <li>the CPU, memory, and disk requirements</li> <li>the job schedule</li> </ul> <p>For example, the JSON file for a new job might look similar to this:</p> <p><code>json { "id": "myjob", "description": "A job that sleeps regularly", "run": { "cmd": "sleep 20000", "cpus": 0.01, "mem": 32, "disk": 0 }, "schedules": [ { "id": "sleep-schedule", "enabled": true, "cron": "20 0 * * *", "concurrencyPolicy": "ALLOW" } ] }</code></p> </li> <li> <p>Save the JSON file for the new job using an easily-identifiable file name. For example, you might save the job information as <code>mysleepjob.json</code>.</p> </li> <li> <p>Add the job by running a command similar to the following:</p> <p><code>bash dcos job add &lt;myjob&gt;.json</code></p> <p>For example:</p> <p><code>bash dcos job add mysleepjob.json</code> 1. Verify that you have added the new job by running a command similar to the following:</p> <p><code>bash dcos job list</code></p> <p>The command displays the list of jobs similar to the following:</p> <p><code>bash ID STATUS LAST RUN mysleepjob Scheduled N/A mypingjob Running N/A</code></p> </li> </ol> <h3 id=set-a-concurrency-policy-for-scheduled-jobs>Set a concurrency policy for scheduled jobs<a class=headerlink href=#set-a-concurrency-policy-for-scheduled-jobs title="Permanent link">&para;</a></h3> <p>If you use a schedule to start a job, you can define a concurrency policy for the job. A concurrency policy determines whether a new job run instance is triggered if there's already a job instance running. </p> <p>For example, assume you have a job scheduled to start every day at 3:00AM, and you have set the concurrency policy for the job set to FORBID. If there is an instance of that job already running at 3:00AM--either because a previously-triggered job run is still active or has been triggered manually outside of the schedule--the scheduled start time will not trigger a new job to run. If there are no jobs running at the next scheduled start time, a new job instance starts and runs as scheduled.</p> <p>If you want to allow scheduled jobs to be triggered while other instances of the same job are running, you can set the <code>concurrencyPolicy</code> to ALLOW. </p> <h3 id=create-a-schedule-only-json-file>Create a schedule-only JSON file<a class=headerlink href=#create-a-schedule-only-json-file title="Permanent link">&para;</a></h3> <p>If you specify a schedule for a job in the JSON file for that job, you can assign only one schedule for the job to run under.</p> <p>If you want to use the same schedule for more than one job, however, you can create a separate JSON file specifically for the schedule. You can then use the <code>dcos job schedule add &lt;job-id&gt; &lt;schedule-file&gt;</code> command to associate a job with the schedule.</p> <ol> <li> <p>Open a file in a text editor to <a href=#cli-add-job>create a new job</a> file in JSON format, if necessary.</p> <p>You must use the job <code>id</code> you define for the job to associate a schedule JSON file with the job. To prevent schedule conflicts or unexpected job runs, you should not define schedule parameters for a job if you want to use the schedule-only JSON file to control when a job runs.</p> </li> <li> <p>Open a new file in a text editor to create the schedule you want to use in JSON format.</p> <p>For example, the JSON file for a new schedule might look similar to this:</p> <p><code>json { "concurrencyPolicy": "ALLOW", "cron": "20 0 * * *", "enabled": true, "id": "nightly", "nextRunAt": "2016-07-26T00:20:00.000+0000", "startingDeadlineSeconds": 900, "timezone": "UTC" }</code></p> </li> <li> <p>Save the JSON file for the new schedule using an easily-identifiable file name. For example, you might save the schedule information as <code>my-cron-def.json</code>.</p> </li> <li> <p>Associate the job with the schedule by running a command similar to the following:</p> <p><code>bash dcos job schedule add &lt;job-id&gt; &lt;schedule-file&gt;</code></p> <p>For example:</p> <p><code>bash dcos job schedule add mytestjob my-cron-def.json</code></p> <p>If you attempt to add a schedule definition to a job that already has a schedule defined, the command displays an error similar to the following: <code>Error: 409 - requirement failed: A schedule with id nightly already exists</code></p> </li> <li> <p>Verify that you have added the new job schedule by running a command similar to the following:</p> <p><code>bash dcos job schedule show mytestjob</code></p> <p>This command displays schedule information for the specified job similar to the following:</p> <p><code>bash ID CRON ENABLED NEXT RUN CONCURRENCY POLICY nightly 20 0 * * * True 2019-04-11T00:20:00.000+0000 ALLOW</code></p> </li> </ol> <h3 id=start-a-job-from-the-command-line>Start a job from the command line<a class=headerlink href=#start-a-job-from-the-command-line title="Permanent link">&para;</a></h3> <p>You can trigger a job to run: - manually on-demand - automatically based on a schedule you have defined - programmatically through automation with or without a schedule</p> <p>You can use any of these approaches to start a job instance that is referred to as a job run. For example, you can use the DC/OS command-line interface to start jobs regardless of whether you have defined a schedule or not. Starting a job manually from the command-line is similar to starting a job by clicking <strong>Run now</strong> using the DC/OS web-based console.</p> <p>To start a job run on-demand outside of any scheduled job activity, run a command similar to the following:</p> <pre><code class=bash>dcos job run &lt;job-id&gt;
</code></pre> <p>For example, if the job id is <code>mytestjob</code>, run:</p> <pre><code class=bash>dcos job run mytestjob
</code></pre> <p>Starting a job manually from the command-line or through the DC/OS web-based console triggers a new job run each time the command is executed. Jobs that are triggered manually on-demand ignore concurrency policy settings. </p> <p>If a schedule is used to start a job, however, the job's concurrency policy determines whether a new job run instance is triggered. Being able to control whether jobs run concurrently is one of the main differences between triggering a job to run manually or using a schedule.</p> <h3 id=remove-a-job-from-the-command-line>Remove a job from the command-line<a class=headerlink href=#remove-a-job-from-the-command-line title="Permanent link">&para;</a></h3> <p>You can remove a job using the command-line program dcos job remove <job-id> as long as the job does not have any active job instances running. If a job has any currently active running instances, you must stop all of the currently-active jobs. After you stop all running job instances, you can remove the job using the <code>dcos job remove &lt;job-id&gt;</code> command. </p> <p>To remove a job: 1. Check the status of active jobs by running a command similar to the following:</p> <pre><code>```bash
dcos job list
```
</code></pre> <ol> <li> <p>Stop all running job instances for the job you want to delete and remove the job by running the following command:</p> <p><code>bash dcos job remove &lt;job-id&gt; --stop-current-job-runs</code></p> </li> <li> <p>Verify that you have removed the specified job by running the following command:</p> <p><code>dcos job list</code></p> </li> </ol> <h3 id=modify-a-job-from-the-command-line>Modify a job from the command line<a class=headerlink href=#modify-a-job-from-the-command-line title="Permanent link">&para;</a></h3> <p>To modify your job, update your JSON job file, then run</p> <pre><code>dcos job update &lt;job-file&gt;.json
</code></pre> <h4 id=modify-a-jobs-schedule>Modify a job's schedule<a class=headerlink href=#modify-a-jobs-schedule title="Permanent link">&para;</a></h4> <p>You can update the schedule of your job in two ways, depending if your job has a schedule specified in the <code>&lt;job-file&gt;.json</code> or if your job's schedule is kept in a separate file.</p> <h5 id=modify-a-job-with-a-schedule>Modify a job with a schedule<a class=headerlink href=#modify-a-job-with-a-schedule title="Permanent link">&para;</a></h5> <p>Modify the <code>schedules</code> parameter of your <code>&lt;job-file&gt;.json</code>. Then run</p> <pre><code>dcos job update &lt;job-file&gt;.json
</code></pre> <h5 id=modify-a-job-with-a-separate-schedule-file>Modify a job with a separate schedule file<a class=headerlink href=#modify-a-job-with-a-separate-schedule-file title="Permanent link">&para;</a></h5> <p>Modify <code>&lt;schedule-file&gt;.json</code>. Then, run one of the following commands:</p> <pre><code class=bash>dcos job schedule add &lt;job-id&gt; &lt;schedule-file&gt;.json
dcos job schedule remove &lt;job-id&gt; &lt;schedule-id&gt;
dcos job schedule update &lt;job-id&gt; &lt;schedule-file&gt;.json
</code></pre> <h3 id=view-job-details>View job details<a class=headerlink href=#view-job-details title="Permanent link">&para;</a></h3> <p>List all jobs:</p> <pre><code>dcos job list
</code></pre> <p>List all previous runs of your job:</p> <pre><code>dcos job history &lt;job-id&gt;
</code></pre> <p>To view details about your job, run:</p> <pre><code>dcos job show &lt;job-id&gt;
</code></pre> <p>To view details about your job's schedule, run:</p> <pre><code>dcos job schedule show &lt;job-id&gt;
</code></pre> <h4 id=view-job-logs>View job logs<a class=headerlink href=#view-job-logs title="Permanent link">&para;</a></h4> <p>To view the log for your job:</p> <pre><code>dcos task log --completed &lt;job-id&gt;
</code></pre> <p>To get the log for only a specific job run, use a job run ID from <code>dcos job history &lt;job-id&gt;</code></p> <pre><code>dcos task log --completed &lt;job-run-id&gt;
</code></pre> <h2 id=using-the-jobs-api><a name=jobs-api></a>Using the Jobs API<a class=headerlink href=#using-the-jobs-api title="Permanent link">&para;</a></h2> <p>You can also create and administer jobs through calls to the Jobs API endpoints. This section highlights the most common tasks you perform through job-related API calls. For more complete information about the Jobs API, see the <a href=http://dcos.github.io/metronome/docs/generated/api.html>Jobs API reference</a> information.</p> <h3 id=preparing-to-use-api-cals>Preparing to use API cals<a class=headerlink href=#preparing-to-use-api-cals title="Permanent link">&para;</a></h3> <p>The code examples in this section illustrate how to include Jobs API calls to perform job-related tasks with the client URL (cURL) program. For detailed information about using <code>curl</code> command, see the <a href=https://curl.haxx.se/docs/manpage.html><code>curl</code> man page</a>. </p> <p>In addition, one important difference between using the DC/OS command-line interface or web-based console and the API is how you configure the job schedule. The DC/OS CLI and web-based console support a combined JSON format that allows you to specify a schedule in the job descriptor. To schedule a job using the Jobs API, you must use two separate calls: - Use one call to add an <strong>unscheduled</strong> job. - Use a second call to associate a specific <a href=#add-sched>schedule file</a> (<code>schedule-file.json</code>) with the job.</p> <h3 id=add-a-job-using-an-api-call>Add a job using an API call<a class=headerlink href=#add-a-job-using-an-api-call title="Permanent link">&para;</a></h3> <p>The following command adds a job called <code>myjob.json</code>.</p> <pre><code>curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; $(dcos config show core.dcos_url)/service/metronome/v1/jobs -d@/Users/&lt;your-username&gt;/&lt;myjob&gt;.json
</code></pre> <h3 id=remove-a-job-using-an-api-call>Remove a job using an API call<a class=headerlink href=#remove-a-job-using-an-api-call title="Permanent link">&para;</a></h3> <p>The following command removes a job regardless of whether the job is running:</p> <pre><code>curl -X DELETE -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; $(dcos config show core.dcos_url)/service/metronome/v1/jobs/&lt;myjob&gt;?stopCurrentJobRuns=true
</code></pre> <p>To remove a job only if it is not running, set <code>stopCurrentJobRuns</code> to <code>False</code>.</p> <h3 id=modify-or-view-a-job-using-an-api-call>Modify or view a job using an API call<a class=headerlink href=#modify-or-view-a-job-using-an-api-call title="Permanent link">&para;</a></h3> <p>The following command shows all jobs:</p> <pre><code>curl -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; $(dcos config show core.dcos_url)/service/metronome/v1/jobs
</code></pre> <p>The following command lists job runs:</p> <pre><code>curl -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; &quot;$(dcos config show core.dcos_url)/service/metronome/v1/jobs/&lt;myjob&gt;/runs/&quot;
</code></pre> <p>Stop a run with the following command:</p> <pre><code>curl -X POST -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; &quot;$(dcos config show core.dcos_url)/service/metronome/v1/jobs/&lt;myjob&gt;/runs/20160725212507ghwfZ/actions/stop&quot;
</code></pre> <p><a name=add-sched></a></p> <h3 id=add-a-schedule-to-a-job>Add a schedule to a job<a class=headerlink href=#add-a-schedule-to-a-job title="Permanent link">&para;</a></h3> <p>The following command adds a schedule to a job:</p> <pre><code>curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; $(dcos config show core.dcos_url)/service/metronome/v1/jobs/&lt;job-id&gt;/schedules -d@&lt;schedule-file&gt;.json
</code></pre> <h3 id=start-a-job-using-an-api-call>Start a job using an API call<a class=headerlink href=#start-a-job-using-an-api-call title="Permanent link">&para;</a></h3> <p>You can use the DC/OS API to start jobs programmatically. Similar to starting a job using the web-based console or command-line interface, you must specify the job identifer in the call.</p> <p>To trigger a job run to start you can use a REST API call similar to the following:</p> <pre><code>curl -X POST -H &quot;Authorization: token=$(dcos config show core.dcos_acs_token)&quot; $(dcos config show core.dcos_url)/service/metronome/v1/jobs/{jobId}/runs
</code></pre> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../create-service/ title="Create and run custom apps" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Previous </span> Create and run custom apps </span> </div> </a> <a href=../service-discovery/ title="Discover deployed services" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Next </span> Discover deployed services </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2019. All rights reserved. </div> </div> <div class=md-footer-social> <link rel=stylesheet href=../assets/fonts/font-awesome.css> <a href=https://github.com/lsgunnlsgunn class="md-footer-social__link fa fa-github"></a> <a href=https://twitter.com/gunncomm class="md-footer-social__link fa fa-twitter"></a> <a href=https://linkedin.com/in/lisagunn class="md-footer-social__link fa fa-linkedin"></a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/application.245445c6.js></script> <script>app.initialize({version:"1.0.4",url:{base:".."}})</script> <script src=../javascripts/extra.js></script> </body> </html>